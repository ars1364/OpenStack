#cloud-config
# Cloud-init configuration for WordPress marketplace image
# Applied during image build to customize cloud-init defaults

system_info:
  default_user:
    groups: [adm, cdrom, dip, lxd, sudo, www-data]

# APT mirrors (airgap-ready, cloudinative.com)
apt:
  primary:
    - arches: [amd64]
      uri: https://archive.cloudinative.com/ubuntu
  security:
    - arches: [amd64]
      uri: https://security.cloudinative.com/ubuntu

# Ensure services start on first boot
runcmd:
  - systemctl start mariadb
  - systemctl start apache2
  - echo "WordPress is ready. Run 'sudo wp-setup' to configure the database." > /etc/motd
